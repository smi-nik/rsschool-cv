<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Nikolay Smirnov | rsschool-cv</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<main>
<section class="main">
    <h1>Nikolay Smirnov</h1>
    <div class="main-user-info">
    <ul>
        <li>Email: n.smirnov.kz@gmail.com</li>
        <li>Phone: +7705 279 51 70 </li>
        <li>Telegram: smi_nik </li>
    </ul>
        <figure>
            <img src="https://avatars0.githubusercontent.com/u/41865991?s=400&u=79a8d4f91b872f610237d1db0b605ff35c4617a2&v=4" width="200" height="200" alt="smi_nik">
        </figure>
    </div>
</section>
<section class="main">
    <h2>Summary</h2>
    <p>Hello. My name is Nikolay. I work as a leading programmer in a great company. I very like my profession</p>
    <p>My main goals:</p>
<ul>
   <li>Become a senior programmer</li>
   <li>Learn english</li>
   <li>Learn new approaches in developing</li>
</ul>
</section>
<section class="main">
    <h2>Skills</h2>
    <p>Programming Languages and frameworks:</p>
    <ul>
        <li>Javascript</li>
        <li>HTML</li>
        <li>CSS</li>
        <li>PHP</li>
        <li>YII 2.0</li>
        <li>VueJS</li>
        <li>Or3</li>
        <li>Alfresco</li>
    </ul>
</section>
<section class="main">
    <h2>Code example</h2>
        <pre class="highlight">
  /*
    данный код создает запись продления контрольного срока исполнения документа.
    Возможность продления предоставляется всем пользователям с ролью Делопроизводитель
    из Архив документов - кнопка Продлить.
    Результат: создание записи продления, изменение даты контрольного срока в карточке документа,
      увеличение счетчика количества продлений для отчета.
  */

  <import resource="classpath:alfresco/extension/templates/webscripts/ru/mrgrechkinn/core/workflow/mgCoreRegistryEventHandlers.js">

  var runtimeService = function() {
    var ctx = Packages.org.springframework.web.context.ContextLoader.getCurrentWebApplicationContext(); 
    return ctx.getBean(org.activiti.engine.impl.RuntimeServiceImpl);
  }();
  var ctx = Packages.org.springframework.web.context.ContextLoader.getCurrentWebApplicationContext();
  var sR = ctx.getBean(Packages.org.alfresco.repo.service.ServiceDescriptorRegistry);

  function main() {
    if (json) {
      var wfId = json.get("wfId");
      var extendDate = json.get("extendDate");
      var extendDoc = json.get("extendDoc");
      var extendComment = json.get("extendComment");

      var registryObject = runtimeService.getVariable(wfId, "registryObject");

      //создаем объект продления
      java.lang.System.out.println(asdadasdqwesa);
      var prodObject = createProdlRecord(extendComment, extendDate, stringToArray(extendDoc, ","));
      //связываем его с объетом
      registryObject.createAssociation(prodObject, "mgc:prodlenieRecord");
      prodObject.properties["mgc:prodlIsExtended"] = true;
      prodObject.properties["mgc:prodlDateOld"] = runtimeService.getVariable(wfId, "dueDate");
      prodObject.save();
      //в объект
      registryObject.properties["mgc:dueDate"] = extendDate;
      registryObject.save();

      var valueDate = new Date();
      valueDate.setTime(extendDate);
      runtimeService.setVariable(wfId, "mgc_dueDate", new java.util.Date(valueDate.getTime()));
      runtimeService.setVariable(wfId, "extendDate", new java.util.Date(valueDate.getTime()));

      //счетчик продлений для отчета (выгрузки)
      // в новой версии можно будет просто сделать count записей продления
      var prodCount = runtimeService.getVariable(wfId, "prodCount");
      if (prodCount === null || prodCount === undefined) {
        prodCount = 0;
      } else {
        prodCount = prodCount + 1;
      }
      runtimeService.setVariableLocal(wfId, "prodCount", prodCount);
    }
  }

  Packages.org.alfresco.repo.security.authentication.AuthenticationUtil.setRunAsUserSystem();
  main();
        </pre>
</section>
<section class="main">
    <h2>Experience</h2>
    <p>My list of projects: https://gitlab.com/smi_nik</p>
</section>
<section class="main">
    <h2>Education</h2>
    <p>2008-2012 : College of Management: Astana, Kazakhstan</p>
    <p>2012-2016 : TUSUR University: Tomsk, Russia</p>
</section>
<section class="main">
    <h2>English</h2>
    <p>Pre-intermedia</p>
</section>
</main>
</body>
</html>
